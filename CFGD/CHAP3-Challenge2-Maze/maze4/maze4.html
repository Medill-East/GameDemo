<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>元胞自动机</title>
    <style>
        /* 您可以在这里添加样式，定义网格等 */
    </style>
</head>
<body>
    <div id="cellularAutomaton"></div>
    <div id="roundNumber"></div>


    <script>
        // 您的JavaScript代码将在这里
        // 我们可以开始实现元胞自动机的逻辑
        // 在 script 标签中添加以下代码

        // 定义网格大小
        const gridSize = 10; // 您可以根据需要调整大小

        // 创建二维数组表示网格
        let grid = new Array(gridSize).fill(0).map(() => new Array(gridSize).fill(0));

        // 在网页加载完成后执行初始化操作
        document.addEventListener("DOMContentLoaded", function() {
            initializeGrid();
            // 可以添加其他初始化操作或事件监听器
        });

        // 初始化网格
        function initializeGrid() {
            // 在这里添加创建网格的逻辑
            // 您可以使用循环遍历 grid 数组，并根据需要初始化每个格子的状态
        }

        // 在 script 标签中添加以下代码

        let roundNumber = 0; // 初始化回合数

        // 更新元胞自动机状态
        function updateCellularAutomaton() {
            roundNumber++;

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    // 根据规则更新每个格子的逻辑
                    updateCell(row, col);
                }
            }

            // 更新网页上的回合数显示
            updateRoundDisplay();

            // 可以添加其他更新或显示逻辑
        }

        // 更新单个格子的状态
        function updateCell(row, col) {
            const isOddRound = roundNumber % 2 !== 0;
            const isOddRow = row % 2 !== 0;

            // 判断当前格子是否是回合认定的下方格子
            const isBottomCell = (isOddRound && isOddRow) || (!isOddRound && !isOddRow);

            // 根据规则更新每个格子的状态
            if (isBottomCell && row < gridSize - 1) {
                const upperRow = isOddRound ? row + 1 : row - 1;
                const upperCellState = grid[upperRow][col];

                // 根据上方格子状态更新当前格子的逻辑
                if (grid[row][col] === 0 && upperCellState === 1) {
                    // 少阴 -> 老阴
                    grid[row][col] = 1;
                } else if (grid[row][col] === 1 && upperCellState === 0) {
                    // 老阴 -> 少阳
                    grid[row][col] = 2;
                } else if (grid[row][col] === 2 && upperCellState === 0) {
                    // 少阳 -> 老阳
                    grid[row][col] = 3;
                } else if (grid[row][col] === 3 && upperCellState === 1) {
                    // 老阳 -> 少阴
                    grid[row][col] = 0;
                }
            } else if (row === 0 && !isBottomCell) {
                // 处理最上面一行的情况
                // 在这里添加相应的逻辑
            }

            // 更新格子的颜色
            const cellElement = document.getElementById(`cell-${row}-${col}`);
            cellElement.style.backgroundColor = grid[row][col] === 0 ? "black" : "white";

        }

        // 更新回合数显示
        function updateRoundDisplay() {
            // 在这里更新显示回合数的逻辑，可以使用 DOM 操作来更新页面上的元素
            const roundDisplay = document.getElementById("roundNumber");
            roundDisplay.textContent = `回合数: ${roundNumber}`;
        }

        // 初始化网格
        function initializeGrid() {
            const gridContainer = document.getElementById("cellularAutomaton");
            gridContainer.style.position = "relative"; // 设置相对定位
            gridContainer.style.width = `${gridSize * 50}px`; // 设置合适的宽度
            gridContainer.style.height = `${gridSize * 50}px`; // 设置合适的高度

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    // 在这里添加创建网格的逻辑
                    const cell = document.createElement("div");
                    cell.className = "cell";
                    cell.id = `cell-${row}-${col}`; // 添加唯一的id

                    // 使用颜色来表示状态
                    cell.style.backgroundColor = grid[row][col] === 0 ? "black" : "white";
                    cell.style.border = "1px solid gray"; // 添加边框
                    cell.style.position = "absolute"; // 设置绝对定位
                    cell.style.top = `${row * 50}px`; // 调整格子位置
                    cell.style.left = `${col * 50}px`;

                    // 添加文字以显示格子位置
                    cell.textContent = `(${row}, ${col})`;
                    cell.style.color = "yellow";  // 将文字颜色设置为黄色

                    gridContainer.appendChild(cell);
                }
            }
        }

        // 在网页加载完成后执行初始化操作
        document.addEventListener("DOMContentLoaded", function() {
            initializeGrid();
            updateCellularAutomaton(); // 初始化后进行第一次更新
            // 可以添加其他初始化操作或事件监听器
        });


    </script>
</body>
</html>
